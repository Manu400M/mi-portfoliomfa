<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CryoEBUS Lineal - Dashboard</title>
    <link rel="stylesheet" href="../css/CryoEBUSL2.css">
</head>
<body>

    <div class="dashboard">

        <section class="col-left">
            <div class="carousel-container">
                <h2>DISE√ëO CAD</h2>
                <div class="carousel">
                    <img src="../assets/img/Capturas porfolio/Radial/moldes y resultado.png" alt="Imagen de dise√±o CAD 1" class="active">
                    <img src="../assets/img/Capturas porfolio/Radial/resultados planta.png" alt="Imagen de dise√±o CAD 2">
                    <img src="../assets/img/Capturas porfolio/Radial/tr√°quea cad.png" alt="Imagen de dise√±o CAD 3">

                </div>
                <button class="prev">&#10094;</button>
                <button class="next">&#10095;</button>
            </div>
            <div class="carousel-container">
                <h2>RENDERS</h2>
                <div class="carousel">
                    <img src="../assets/img/img_portfolio/Neumologia/radial.png" alt="Render del producto 1" class="active">
                    <img src="../assets/img/img_portfolio/Neumologia/radial 2.png" alt="Render del producto 2">


                </div>
                <button class="prev">&#10094;</button>
                <button class="next">&#10095;</button>
            </div>
        </section>

        <section class="col-center">
            <div class="texto">
                <div id="link_titulo">
                <h1>CRYOEBUS RADIAL</h1>
                <!-- <a id="linkpag" href="/pages/EBUS_Radial.html">M√°s Info+</a> -->
              </div>
                <div>
                    <h3>DISE√ëO</h3>
                    <p>Se dise√±√≥ un simulador modular de bloque pulmonar completo a partir de un modelo 3D modificado de un paciente real. Se desarrollaron tres prototipos para validar tanto el dise√±o como el proceso de fabricaci√≥n.</p>
                </div>
                <div>
                    <h3>FABRICACI√ìN</h3>
                    <p>Una vez validado, se fabricaron varios modelos mediante impresi√≥n 3D e inyecci√≥n a n√∫cleo perdido, siendo comercializados a nivel europeo.</p>
                </div>
            </div>
            <div class="modelo-3d" >
                <section id="model_viewer" class="main-section" style="width: 100%; height: 600px; background-color: transparent; display: flex; align-items: center; justify-content: center;">
            <span id="video-loading-message" class="loading-message"></span>
                  <video id="main-video" src="../assets/vid/video ruta radial.mp4" 
                autoplay 
                loop 
                muted 
                playsinline 
                style="width: 100%; height: 100%; object-fit: cover;border-radius:20px;">
             </video>
            </div>
             
        </section>

        <section class="col-right">
            <div class="carousel-container">
                <h2>FABRICACI√ìN</h2>
                <div class="carousel">
                        <img src="../assets/img/Radial prototipo/radial v1 molde.jpg" alt="Foto del proceso de fabricaci√≥n 1" class="active">
                    <img src="../assets/img/Radial prototipo/radial v1 inyecci√≥n.jpg" alt="Foto del proceso de fabricaci√≥n 2">
                    <img src="../assets/img/Radial prototipo/radial v2 molde.jpg" alt="Foto del proceso de fabricaci√≥n 3">
                    <img src="../assets/img/Radial prototipo/radial v3 inyeccion.jpg" alt="Foto del proceso de fabricaci√≥n 3">

                </div>
                <button class="prev">&#10094;</button>
                <button class="next">&#10095;</button>
            </div>
            <div class="carousel-container">
                <h2>IMPLEMENTACI√ìN</h2>
                <div class="carousel">
                    <img src="../assets/img/Radial prototipo/radial v2 prueba.jpg" alt="Foto del simulador en uso 1" class="active">
                    <img src="../assets/img/Radial prototipo/radial v3 prueba.jpg" alt="Foto del simulador en uso 2">

                </div>
                <button class="prev">&#10094;</button>
                <button class="next">&#10095;</button>
            </div>
        </section>

    </div>

    <!-- Babylon.js core y loader para GLTF -->
<script src="https://cdn.babylonjs.com/babylon.js"></script>
<script src="https://cdn.babylonjs.com/loaders/babylon.glTF2FileLoader.min.js"></script>

<script>
  window.addEventListener('DOMContentLoaded', function () {
    const canvas = document.getElementById("babylon-canvas");
    const engine = new BABYLON.Engine(canvas, true);

    const createScene = function () {
      const scene = new BABYLON.Scene(engine);
      scene.clearColor = new BABYLON.Color4(0.27, 0.27, 0.27, 1);

      // C√°mara tipo Google Maps 3D
      const camera = new BABYLON.ArcRotateCamera("camera",
        -Math.PI / 2, Math.PI / 2.5,
        5,
        BABYLON.Vector3.Zero(),
        scene
      );
      camera.attachControl(canvas, true); // üü¢ Habilita movimiento con el mouse
      camera.useAutoRotationBehavior = false;

      camera.panningSensibility = 50;      // Movimiento lateral (click derecho o ctrl+click)
      camera.wheelDeltaPercentage = 0.01;  // Zoom suave
      camera.lowerRadiusLimit = 0.2;       // L√≠mite de zoom m√≠nimo
      camera.upperRadiusLimit = 20;        // L√≠mite de zoom m√°ximo

      const light = new BABYLON.HemisphericLight("light", new BABYLON.Vector3(0, 1, 0), scene);
      light.intensity = 1.2;

      BABYLON.SceneLoader.Append("../assets/3D/", "ABR2.glb", scene, function () {
        console.log("‚úÖ Modelo cargado correctamente");

        const meshes = scene.meshes;
        const root = meshes.find(m => m.name !== "__root__") || scene.meshes[0];

        // Centrar c√°mara en el modelo
        if (root) {
          camera.target = root.getBoundingInfo().boundingBox.centerWorld;

          // Auto escala si es peque√±o
          const size = root.getBoundingInfo().boundingBox.extendSizeWorld.length();
          if (size < 0.5) {
            root.scaling.scaleInPlace(1 / size);
          }
        }
      }, null, function (_, message) {
        console.error("‚ùå Error al cargar el modelo:", message);
      });

      return scene;
    };

    const scene = createScene();
    engine.runRenderLoop(() => scene.render());

    window.addEventListener("resize", () => engine.resize());
  });
</script>

    <script>
  function openLightbox(img) {
    const lightbox = document.getElementById('lightbox');
    const lightboxImg = document.getElementById('lightbox-img');
    lightbox.style.display = 'flex';
    lightboxImg.src = img.src;
  }

  function closeLightbox() {
    const lightbox = document.getElementById('lightbox');
    lightbox.style.display = 'none';
  }
</script>

<script src="../assets/js/CryoEbusL2.js"></script>

<!-- Contenedor de enfoque (overlay) -->
<div class="carousel-focus" id="carouselFocus" aria-hidden="true">
  <button class="close-focus" id="closeFocus" aria-label="Cerrar">&times;</button>
  <div class="focus-content"></div>
</div>


</body>
</html>