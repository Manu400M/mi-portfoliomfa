<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale1.0">
    <title>Portfolio</title>
    <link rel="stylesheet" href="../css/CryoEBUS_Lineal.css">
  </head>

  <body>
    <div class="portada" >
        <img id="img_portada" src="../assets/img/img_portfolio/Neumologia/PXL_20241130_114115569.jpg">
        <div class="filtro">
            <h1 class="titulo-portada">CryoEBUS Lineal</h1>
        </div>
    </div>
    <section class="contenido">
        <div class="texto">
            <h2>Descripci√≥n del proyecto</h2>
            <p>Durante la simulaci√≥n de operaciones de cardiolog√≠a intervencionista se puede acceder al coraz√≥n de varias formas dependiendo del tipo de 
                procedimiento y las caracter√≠sticas del caso. Las m√°s comunes son: acceso femoral, acceso central, acceso braquial y acceso radial. Los simuladores
                de los dos primeros casos ya han sido desarrollados e implementados en diversos cursos; por lo que se desarrollar√° un nuevo simulador de acceso braquial-radial para poder entrenar todos los tipos
                de acceso que los cardiologos emplean en un procedimiento real, a√±adiendo as√≠ la incertidumbre que supone tener que elegir cual emplear durante la simulaci√≥n.

            </p>
        </div>
        <!-- <div class="media"></div> -->
    </section>

    <section class="espacion"><img id="img_portada" src="../assets/img/Acceso_Braquial/primer_prototipo.jpg"></section>

    <section class="contenido">
        <div class="texto">
            <h2>Dise√±o</h2>
            <p>Partiendo de modelos anat√≥micos digitales realistas de la vasculatura, sistema nervioso y estructura h√≥sea del brazo, se dise√±√≥ un simulador sint√©tico mediante herramientas CAD como Fusion360.
                Sus componentes est√°n divididos en tres categor√≠as: acceso braquial, acceso radial y soporte.
            </p>
        </div>
        <div class="media">
            <div class="image-container">
                <img src="../assets/img/Capturas porfolio/CryoEBUS_Lineal/molde traquea iso.png" alt="Vista previa" class="thumbnail" onclick="openLightbox(this)">
            </div>
            <div class="image-container">
                <img src="../assets/img/Capturas porfolio/CryoEBUS_Lineal/traquea v3.png" alt="Vista previa" class="thumbnail" onclick="openLightbox(this)">
            </div>
            <div class="image-container">
                <img src="../assets/img/Capturas porfolio/CryoEBUS_Lineal/traquea v3 explosion.png" alt="Vista previa" class="thumbnail" onclick="openLightbox(this)">
            </div>
        </div>
    </section>

    <section class="espacion"><img id="img_portada" src="../assets/img/Acceso_Braquial/zoom-braquial-radial_integrado.jpg"></section>

    <section class="contenido">
        <div class="media">
            <div class="image-container">
                <img src="../assets/img/CryoEBUS_Lineal/impresi√≥n nucleo v1 pvafeo.jpg" alt="Vista previa" class="thumbnail" onclick="openLightbox(this)">
            </div>
            <div class="image-container">
                <img src="../assets/img/CryoEBUS_Lineal/molde v2.jpg" alt="Vista previa" class="thumbnail" onclick="openLightbox(this)">
            </div>
            <div class="image-container">
                <img src="../assets/img/CryoEBUS_Lineal/desmoldeo traquea v2.jpg" alt="Vista previa" class="thumbnail" onclick="openLightbox(this)">
            </div>
        </div>
        <div class="texto">
            <h2>Prototipado</h2>
            <p>Una vez finalizada la etapa de dise√±o, se fabric√≥ un primer prototipo mediante impresi√≥n aditiva de filamento e inyecci√≥n de moldes con diversos materiales.</p>
        </div>
    </section>

    <section class="espacion"><img id="img_portada" src="../assets/img/img_portfolio/Cardiologia/braquial 3.png"></section>

    <section class="contenido">
        <div class="texto">
            <h2>Validaci√≥n</h2>
            <p>Para validar el dise√±o del simulador se cont√≥ con la colaboraci√≥n del departamento de cardiolog√≠a del Hospital Universitario Marqu√©s de Valdecilla.</p>
        </div>
        <div class="media">
            <div class="image-container">
                <img src="../assets/img/CryoEBUS_Lineal/traqueas v1 prueba.jpg" alt="Vista previa" class="thumbnail" onclick="openLightbox(this)">
            </div>
            <div class="image-container">
                <img src="../assets/img/CryoEBUS_Lineal/prueba traquea v2.jpg" alt="Vista previa" class="thumbnail" onclick="openLightbox(this)">
            </div>
            <div class="image-container">
                <img src="../assets/img/CryoEBUS_Lineal/traquea en uso curso.jpg" alt="Vista previa" class="thumbnail" onclick="openLightbox(this)">
            </div>
        </div>
    </section>

    <section class="espacion">
        <video autoplay loop muted playsinline id="bg-video">
            <source src="../assets/vid/cabeza con traquea animacion e interior.mp4" type="video/mp4">
            Tu navegador no soporta el video HTML5.
        </video>
    </section>

     <section class="contenido">
        <div class="media">
            <div class="image-container">
                <img src="../assets/img/CryoEBUS_Lineal/4 listas envio oblicuo.jpg" alt="Vista previa" class="thumbnail" onclick="openLightbox(this)">
            </div>
            <div class="image-container">
                <img src="../assets/img/CryoEBUS_Lineal/envio.jpg" alt="Vista previa" class="thumbnail" onclick="openLightbox(this)">
            </div>
            <div class="image-container">
                <img src="../assets/img/CryoEBUS_Lineal/ensamblaje cabeza y traquea.jpg" alt="Vista previa" class="thumbnail" onclick="openLightbox(this)">
            </div>

            <div id="lightbox" onclick="closeLightbox()">
                <img id="lightbox-img" src="" alt="Imagen ampliada">
            </div>
        </div>
        <div class="texto">
            <h2>Implementaci√≥n y Uso</h2>
            <p>Tras varias iteraciones de dise√±o, prototipado y validaci√≥n, se obtuvo el dise√±o definitivo actualmente en uso.</p>
        </div>
    </section>

    <section id="model_viewer" class="main-section" style="width: 100%; height: 600px; background-color: #444;">
        <canvas id="babylon-canvas" style="width: 100%; height: 100%; display: block; touch-action: none;"></canvas>
    </section>


    <!-- Babylon.js core y loader para GLTF -->
<script src="https://cdn.babylonjs.com/babylon.js"></script>
<script src="https://cdn.babylonjs.com/loaders/babylon.glTF2FileLoader.min.js"></script>

<script>
  window.addEventListener('DOMContentLoaded', function () {
    const canvas = document.getElementById("babylon-canvas");
    const engine = new BABYLON.Engine(canvas, true);

    const createScene = function () {
      const scene = new BABYLON.Scene(engine);
      scene.clearColor = new BABYLON.Color4(0.27, 0.27, 0.27, 1);

      // C√°mara tipo Google Maps 3D
      const camera = new BABYLON.ArcRotateCamera("camera",
        -Math.PI / 2, Math.PI / 2.5,
        5,
        BABYLON.Vector3.Zero(),
        scene
      );
      camera.attachControl(canvas, true); // üü¢ Habilita movimiento con el mouse
      camera.useAutoRotationBehavior = false;

      camera.panningSensibility = 50;      // Movimiento lateral (click derecho o ctrl+click)
      camera.wheelDeltaPercentage = 0.01;  // Zoom suave
      camera.lowerRadiusLimit = 0.2;       // L√≠mite de zoom m√≠nimo
      camera.upperRadiusLimit = 20;        // L√≠mite de zoom m√°ximo

      const light = new BABYLON.HemisphericLight("light", new BABYLON.Vector3(0, 1, 0), scene);
      light.intensity = 1.2;

      BABYLON.SceneLoader.Append("../assets/3D/", "caja.glb", scene, function () {
        console.log("‚úÖ Modelo cargado correctamente");

        const meshes = scene.meshes;
        const root = meshes.find(m => m.name !== "__root__") || scene.meshes[0];

        // Centrar c√°mara en el modelo
        if (root) {
          camera.target = root.getBoundingInfo().boundingBox.centerWorld;

          // Auto escala si es peque√±o
          const size = root.getBoundingInfo().boundingBox.extendSizeWorld.length();
          if (size < 0.5) {
            root.scaling.scaleInPlace(1 / size);
          }
        }
      }, null, function (_, message) {
        console.error("‚ùå Error al cargar el modelo:", message);
      });

      return scene;
    };

    const scene = createScene();
    engine.runRenderLoop(() => scene.render());

    window.addEventListener("resize", () => engine.resize());
  });
</script>

    <script>
  function openLightbox(img) {
    const lightbox = document.getElementById('lightbox');
    const lightboxImg = document.getElementById('lightbox-img');
    lightbox.style.display = 'flex';
    lightboxImg.src = img.src;
  }

  function closeLightbox() {
    const lightbox = document.getElementById('lightbox');
    lightbox.style.display = 'none';
  }
</script>

  </body>